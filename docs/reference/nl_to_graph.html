<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate igraph objects from measured turtles and links metrics — nl_to_graph • nlrx | NetLogo from R</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate igraph objects from measured turtles and links metrics — nl_to_graph"><meta name="description" content="Generate igraph objects from measured turtles and links metrics"><meta property="og:description" content="Generate igraph objects from measured turtles and links metrics"><meta property="og:image" content="https://docs.ropensci.org/nlrx/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">nlrx | NetLogo from R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/getstarted.html"><span class="fa fa-magic"></span> Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/furthernotes.html"><span class="fa fa-book"></span> Advanced configuration</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more"><li><a class="dropdown-item" href="../articles/articles/spatial-output.html"><span class="fa fa-location-arrow"></span> Capturing spatial NetLogo output</a></li>
    <li><a class="dropdown-item" href="../articles/articles/manual-output.html"><span class="fa fa-location-arrow"></span> Capturing NetLogo output manually</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html"><span class="fa fa-gear"></span> Sensitivity Analysis with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/optimization.html"><span class="fa fa-gear"></span> Optimization with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/abc.html"><span class="fa fa-gear"></span> Approximate Bayesian Computation (ABC) with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/simdesign-examples.html"><span class="fa fa-gear"></span> Simdesign examples</a></li>
    <li><a class="dropdown-item" href="../articles/articles/interfacing-different-models.html"><span class="fa fa-image"></span> Interfacing a variety of different NetLogo models</a></li>
    <li><a class="dropdown-item" href="../articles/articles/nlrx_nldoc.html"><span class="fa fa-book"></span> NetLogo documentation with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/articles/nlrx_papers.html"><span class="fa fa-bookmark"></span> Publication record</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/abc.html">Approximate Bayesian Computation (ABC)</a></li>
    <li><a class="dropdown-item" href="../articles/furthernotes.html">Advanced configuration</a></li>
    <li><a class="dropdown-item" href="../articles/getstarted.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/interfacing-different-models.html">Interfacing a variety of different NetLogo models</a></li>
    <li><a class="dropdown-item" href="../articles/manual-output.html">Capturing NetLogo output manually</a></li>
    <li><a class="dropdown-item" href="../articles/nlrx_nldoc.html">NetLogo documentation with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/nlrx_papers.html">Publication record</a></li>
    <li><a class="dropdown-item" href="../articles/optimization.html">Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/simdesign-examples.html">Simdesign examples</a></li>
    <li><a class="dropdown-item" href="../articles/spatial-output.html">Spatial Output</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/nlrx/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate igraph objects from measured turtles and links metrics</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/nlrx/blob/HEAD/R/nl_to_graph.R" class="external-link"><code>R/nl_to_graph.R</code></a></small>
      <div class="d-none name"><code>nl_to_graph.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate igraph objects from measured turtles and links metrics</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nl_to_graph</span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-nl">nl<a class="anchor" aria-label="anchor" href="#arg-nl"></a></dt>
<dd><p>nl object</p>
<p>Generate igraph objects from measured turtles and links metrics.
Output has to be attached to the simdesign first with simoutput(nl) &lt;- results
I graph objects are created automatically for each combination of random-seed, siminputrow and step.
An additional column with igraph objects is attached to the original output results tibble of the nl object.
In order to generate igraph objects some metrics are mandatory:
The metrics.turtles slot of the experiment must contain "who" numbers (see example experiment).
Additional turtle metrics will be stored as properties of the igraph vertices.
The metrics.links slot of the experiment must contain "who" numbers of link end1 and end2 (see example experiment).
Additional link metrics will be stored as properties of the igraph edges.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## Example running the Giant Component model from the NetLogo models library:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/nlrx/">nlrx</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/" class="external-link">igraph</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Windows default NetLogo installation path (adjust to your needs!):</span></span></span>
<span class="r-in"><span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/Program Files/NetLogo 6.0.4"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Networks/Giant Component.nlogo"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/out"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Unix default NetLogo installation path (adjust to your needs!):</span></span></span>
<span class="r-in"><span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/NetLogo 6.0.4"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Networks/Giant Component.nlogo"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/out"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="fu"><a href="nl.html">nl</a></span><span class="op">(</span>nlversion <span class="op">=</span> <span class="st">"6.0.4"</span>,</span></span>
<span class="r-in"><span>         nlpath <span class="op">=</span> <span class="va">netlogopath</span>,</span></span>
<span class="r-in"><span>         modelpath <span class="op">=</span> <span class="va">modelpath</span>,</span></span>
<span class="r-in"><span>         jvmmem <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="experiment.html">experiment</a></span><span class="op">(</span>expname<span class="op">=</span><span class="st">"networks"</span>,</span></span>
<span class="r-in"><span>                            outpath<span class="op">=</span><span class="va">outpath</span>,</span></span>
<span class="r-in"><span>                            repetition<span class="op">=</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                            tickmetrics<span class="op">=</span><span class="st">"false"</span>,</span></span>
<span class="r-in"><span>                            idsetup<span class="op">=</span><span class="st">"setup"</span>,</span></span>
<span class="r-in"><span>                            idgo<span class="op">=</span><span class="st">"go"</span>,</span></span>
<span class="r-in"><span>                            runtime<span class="op">=</span><span class="fl">50</span>,</span></span>
<span class="r-in"><span>                            metrics.turtles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"turtles"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"who"</span>, <span class="st">"color"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            metrics.links <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"links"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[who] of end1"</span>, <span class="st">"[who] of end2"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"num-nodes"</span> <span class="op">=</span> <span class="fl">80</span>,</span></span>
<span class="r-in"><span>                                             <span class="st">"layout?"</span> <span class="op">=</span> <span class="st">"true"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="simdesign_simple.html">simdesign_simple</a></span><span class="op">(</span><span class="va">nl</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span><span class="op">@</span><span class="va">simoutput</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_nl_all.html">run_nl_all</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nl.graph</span> <span class="op">&lt;-</span> <span class="fu">nl_to_graph</span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Extract graph of tick 1:</span></span></span>
<span class="r-in"><span><span class="va">nl.graph.i</span> <span class="op">&lt;-</span> <span class="va">nl.graph</span><span class="op">$</span><span class="va">spatial.links</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co">## Set vertex colors by measured color variable:</span></span></span>
<span class="r-in"><span><span class="va">vcols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"7"</span> <span class="op">=</span> <span class="st">"grey"</span>, <span class="st">"15"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">nl.graph.i</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="va">vcols</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">nl.graph.i</span><span class="op">)</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co">## Set edge colors by measured link breed:</span></span></span>
<span class="r-in"><span><span class="va">ecols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"links"</span> <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r.igraph.org/reference/E.html" class="external-link">E</a></span><span class="op">(</span><span class="va">nl.graph.i</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="va">ecols</span><span class="op">[</span><span class="fu"><a href="https://r.igraph.org/reference/E.html" class="external-link">E</a></span><span class="op">(</span><span class="va">nl.graph.i</span><span class="op">)</span><span class="op">$</span><span class="va">breed</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Plot:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r.igraph.org/reference/plot.igraph.html" class="external-link">plot.igraph</a></span><span class="op">(</span><span class="va">nl.graph.i</span>, vertex.size<span class="op">=</span><span class="fl">8</span>, vertex.label<span class="op">=</span><span class="cn">NA</span>, edge.arrow.size<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

