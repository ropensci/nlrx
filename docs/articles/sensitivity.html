<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sensitivity Analysis • nlrx | NetLogo from R</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sensitivity Analysis">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">nlrx | NetLogo from R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getstarted.html"><span class="fa fa-magic"></span> Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/furthernotes.html"><span class="fa fa-book"></span> Advanced configuration</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more">
<li><a class="dropdown-item" href="../articles/articles/spatial-output.html"><span class="fa fa-location-arrow"></span> Capturing spatial NetLogo output</a></li>
    <li><a class="dropdown-item" href="../articles/articles/manual-output.html"><span class="fa fa-location-arrow"></span> Capturing NetLogo output manually</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html"><span class="fa fa-gear"></span> Sensitivity Analysis with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/optimization.html"><span class="fa fa-gear"></span> Optimization with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/abc.html"><span class="fa fa-gear"></span> Approximate Bayesian Computation (ABC) with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/simdesign-examples.html"><span class="fa fa-gear"></span> Simdesign examples</a></li>
    <li><a class="dropdown-item" href="../articles/articles/interfacing-different-models.html"><span class="fa fa-image"></span> Interfacing a variety of different NetLogo models</a></li>
    <li><a class="dropdown-item" href="../articles/articles/nlrx_nldoc.html"><span class="fa fa-book"></span> NetLogo documentation with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/articles/nlrx_papers.html"><span class="fa fa-bookmark"></span> Publication record</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/abc.html">Approximate Bayesian Computation (ABC)</a></li>
    <li><a class="dropdown-item" href="../articles/furthernotes.html">Advanced configuration</a></li>
    <li><a class="dropdown-item" href="../articles/getstarted.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/interfacing-different-models.html">Interfacing a variety of different NetLogo models</a></li>
    <li><a class="dropdown-item" href="../articles/manual-output.html">Capturing NetLogo output manually</a></li>
    <li><a class="dropdown-item" href="../articles/nlrx_nldoc.html">NetLogo documentation with nlrx</a></li>
    <li><a class="dropdown-item" href="../articles/nlrx_papers.html">Publication record</a></li>
    <li><a class="dropdown-item" href="../articles/optimization.html">Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/simdesign-examples.html">Simdesign examples</a></li>
    <li><a class="dropdown-item" href="../articles/spatial-output.html">Spatial Output</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/nlrx/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sensitivity Analysis</h1>
                        <h4 data-toc-skip class="author">Jan
Salecker</h4>
            
            <h4 data-toc-skip class="date">2025-11-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/nlrx/blob/HEAD/vignettes/sensitivity.Rmd" class="external-link"><code>vignettes/sensitivity.Rmd</code></a></small>
      <div class="d-none name"><code>sensitivity.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="sensitivity-analysis-with-nlrx">Sensitivity Analysis with nlrx<a class="anchor" aria-label="anchor" href="#sensitivity-analysis-with-nlrx"></a>
</h2>
<p>Different types of sensitivity analyses can be conducted using the
nlrx package. To perform a local sensitivity analysis, we recommend
using the <code><a href="../reference/simdesign_distinct.html">simdesign_distinct()</a></code> to specify local changes of
parameters. Afterwards the proportion of output change can be easily
calculated from the simulation results. The nlrx package also provides
simdesign helper functions to conduct more sophisticated methods such as
Morris Elementary Effects Screening (<code><a href="../reference/simdesign_morris.html">simdesign_morris()</a></code>),
Sobol variance decomposition (<code><a href="../reference/simdesign_sobol.html">simdesign_sobol()</a></code>,
<code><a href="../reference/simdesign_sobol2007.html">simdesign_sobol2007()</a></code>,
<code><a href="../reference/simdesign_soboljansen.html">simdesign_soboljansen()</a></code>) and Extended Fourier amplitude
sensitivity test (<code>simdesign_eFAST</code>). Additionally, output of
Latin Hypercube Sampling designs (<code><a href="../reference/simdesign_lhs.html">simdesign_lhs()</a></code>) can be
used to calculate parameter effects based on Partial (rank) correlation
coefficients or Standardised (rank) regression coefficients.</p>
<p>In this vignette, we present an example of the Morris Elementary
Effects screening. Other sensitivity analyses simdesigns work in a quite
similar way. Details on the specific methods can be found in the
corresponding simdesign help pages and the documentation of the <a href="https://cran.r-project.org/package=sensitivity" class="external-link">sensitivity
package</a>. The second example shows how Latin Hypercube Sampling can
be used to calculate Partial (rank) correlation coefficients and
Standardised (rank) regression coefficients.</p>
<div class="section level3">
<h3 id="example-1-morris-elementary-effects-screening">Example 1: Morris elementary effects screening<a class="anchor" aria-label="anchor" href="#example-1-morris-elementary-effects-screening"></a>
</h3>
<p>Here we present a simple example for running a Morris Sensitivity
Analysis with nlrx. We use the Wolf Sheep Predation model from the
models library for this example.</p>
<div class="section level5">
<h5 id="step-1-create-a-nl-object">Step 1: Create a nl object:<a class="anchor" aria-label="anchor" href="#step-1-create-a-nl-object"></a>
</h5>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/nlrx/">nlrx</a></span><span class="op">)</span></span>
<span><span class="co"># Windows default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/Program Files/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/out"</span><span class="op">)</span></span>
<span><span class="co"># Unix default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/out"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nl.html">nl</a></span><span class="op">(</span>nlversion <span class="op">=</span> <span class="st">"6.0.3"</span>,</span>
<span>         nlpath <span class="op">=</span> <span class="va">netlogopath</span>,</span>
<span>         modelpath <span class="op">=</span> <span class="va">modelpath</span>,</span>
<span>         jvmmem <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-2-attach-an-experiment">Step 2: Attach an experiment<a class="anchor" aria-label="anchor" href="#step-2-attach-an-experiment"></a>
</h5>
<p>In this example, we want to calculate sensitivity for 3 outputs
(number of sheep, number of wolves, number of grass patches). We vary
all numeric model parameters to estimate their sensitivity on the three
defined output metrics. Thus, we define parameter ranges and
distribution functions for all our numeric model parameters. We set the
runtime of the model to 500 ticks and measure our metrics on each tick
(<code>tickmetrics = "true"</code>). However, for calculation of
sensitivity indices, we only want to consider the last 200 ticks. Thus,
we set evalticks to <code>seq(300,500)</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/experiment.html">experiment</a></span><span class="op">(</span>expname <span class="op">=</span> <span class="st">"wolf-sheep-morris"</span>,</span>
<span>                            outpath <span class="op">=</span> <span class="va">outpath</span>,</span>
<span>                            repetition <span class="op">=</span> <span class="fl">1</span>,   </span>
<span>                            tickmetrics <span class="op">=</span> <span class="st">"true"</span>,</span>
<span>                            idsetup <span class="op">=</span> <span class="st">"setup"</span>,  </span>
<span>                            idgo <span class="op">=</span> <span class="st">"go"</span>,        </span>
<span>                            runtime <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                            evalticks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">300</span>,<span class="fl">500</span><span class="op">)</span>,</span>
<span>                            metrics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count sheep"</span>, <span class="st">"count wolves"</span>, <span class="st">"count patches with [pcolor = green]"</span><span class="op">)</span>,</span>
<span>                            variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"initial-number-sheep"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"initial-number-wolves"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"grass-regrowth-time"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">100</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"sheep-gain-from-food"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">50</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"wolf-gain-from-food"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">100</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"sheep-reproduce"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">20</span>, step<span class="op">=</span><span class="fl">5</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"wolf-reproduce"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">20</span>, step<span class="op">=</span><span class="fl">5</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"model-version"</span> <span class="op">=</span> <span class="st">"\"sheep-wolves-grass\""</span>,</span>
<span>                                             <span class="st">"show-energy?"</span> <span class="op">=</span> <span class="st">"false"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-3-attach-a-simulation-design">Step 3: Attach a simulation design<a class="anchor" aria-label="anchor" href="#step-3-attach-a-simulation-design"></a>
</h5>
<p>We use the <code>simdesgin_morris()</code> function to attach a
Morris Sensitivity Analysis design. The <code>morrislevels</code>
parameter sets the number of different values for each parameter
(sampling density). The <code>morrisr</code> paramater sets the number
of repeated samplings (sampling size). The <code>morrisgridjump</code>
parameter sets the number of levels that are increased/decreased for
computing the elementary effects. Morris recommendation is to set this
value to <code>levels / 2</code>. We can increase the
<code>nseeds</code> parameter in order to perform multiple runs of the
same parameter matrix with different random seeds. The variation between
those repetitions is an indicator of the stochasticity effects within
the model. More information on the Morris specific parameters can be
found in the description of the morris function in the sensitivity
package (<code>?morris</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simdesign_morris.html">simdesign_morris</a></span><span class="op">(</span>nl<span class="op">=</span><span class="va">nl</span>,</span>
<span>                                 morristype<span class="op">=</span><span class="st">"oat"</span>,</span>
<span>                                 morrislevels<span class="op">=</span><span class="fl">4</span>,</span>
<span>                                 morrisr<span class="op">=</span><span class="fl">1000</span>,</span>
<span>                                 morrisgridjump<span class="op">=</span><span class="fl">2</span>,</span>
<span>                                 nseeds<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-4-run-simulations">Step 4: Run simulations<a class="anchor" aria-label="anchor" href="#step-4-run-simulations"></a>
</h5>
<p>To execute the simulations, we can use the function
<code><a href="../reference/run_nl_all.html">run_nl_all()</a></code>. Sensitivity analyses typically have many runs
that need to be simulated, thus we recommend to parallelize model runs
by adjusting the future plan (more details on parallelization can be
found in the “Advanced configuration” vignette).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_nl_all.html">run_nl_all</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-5-investigate-output">Step 5: Investigate output<a class="anchor" aria-label="anchor" href="#step-5-investigate-output"></a>
</h5>
<p>First, we need to attach the results to the nl object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/setsim.html">setsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"simoutput"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">nl</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span><span class="op">@</span><span class="va">outpath</span>, <span class="st">"morris.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>After results have been attached, we can use the
<code><a href="../reference/analyze_nl.html">analyze_nl()</a></code> function to calculate morris sensetivity
indices.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">morris</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/analyze_nl.html">analyze_nl</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="example-2-latin-hypercube-sampling">Example 2: Latin Hypercube Sampling<a class="anchor" aria-label="anchor" href="#example-2-latin-hypercube-sampling"></a>
</h3>
<p>Here we perform a Latin Hypercube Sampling to calculate Partial
(rank) correlation coefficients and Standardised (rank) regression
coefficients.</p>
<div class="section level5">
<h5 id="step-1-create-a-nl-object-1">Step 1: Create a nl object:<a class="anchor" aria-label="anchor" href="#step-1-create-a-nl-object-1"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/nlrx/">nlrx</a></span><span class="op">)</span></span>
<span><span class="co"># Windows default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/Program Files/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/out"</span><span class="op">)</span></span>
<span><span class="co"># Unix default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/out"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nl.html">nl</a></span><span class="op">(</span>nlversion <span class="op">=</span> <span class="st">"6.0.3"</span>,</span>
<span>         nlpath <span class="op">=</span> <span class="va">netlogopath</span>,</span>
<span>         modelpath <span class="op">=</span> <span class="va">modelpath</span>,</span>
<span>         jvmmem <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-2-attach-an-experiment-1">Step 2: Attach an experiment<a class="anchor" aria-label="anchor" href="#step-2-attach-an-experiment-1"></a>
</h5>
<p>In this example, we want to calculate sensitivity for 3 outputs
(number of sheep, number of wolves, number of grass patches). We vary
all numeric model parameters to estimate their sensitivity on the three
defined output metrics. Thus, we define parameter ranges and
distribution functions for all our numeric model parameters. We set the
runtime of the model to 500 ticks and measure our metrics on each tick
(<code>evalticks = "true"</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/experiment.html">experiment</a></span><span class="op">(</span>expname <span class="op">=</span> <span class="st">"wolf-sheep-morris"</span>,</span>
<span>                            outpath <span class="op">=</span> <span class="va">outpath</span>,</span>
<span>                            repetition <span class="op">=</span> <span class="fl">1</span>,   </span>
<span>                            tickmetrics <span class="op">=</span> <span class="st">"true"</span>,</span>
<span>                            idsetup <span class="op">=</span> <span class="st">"setup"</span>,  </span>
<span>                            idgo <span class="op">=</span> <span class="st">"go"</span>,        </span>
<span>                            runtime <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                            metrics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count sheep"</span>, <span class="st">"count wolves"</span>, <span class="st">"count patches with [pcolor = green]"</span><span class="op">)</span>,</span>
<span>                            variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"initial-number-sheep"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"initial-number-wolves"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"grass-regrowth-time"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">100</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"sheep-gain-from-food"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">50</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"wolf-gain-from-food"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">100</span>, step<span class="op">=</span><span class="fl">10</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"sheep-reproduce"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">20</span>, step<span class="op">=</span><span class="fl">5</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">"wolf-reproduce"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">20</span>, step<span class="op">=</span><span class="fl">5</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"model-version"</span> <span class="op">=</span> <span class="st">"\"sheep-wolves-grass\""</span>,</span>
<span>                                             <span class="st">"show-energy?"</span> <span class="op">=</span> <span class="st">"false"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-3-attach-a-simulation-design-1">Step 3: Attach a simulation design<a class="anchor" aria-label="anchor" href="#step-3-attach-a-simulation-design-1"></a>
</h5>
<p>Here we want to run a Latin Hypercube Sampling, thus we use the
<code><a href="../reference/simdesign_lhs.html">simdesign_lhs()</a></code> function.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simdesign_lhs.html">simdesign_lhs</a></span><span class="op">(</span><span class="va">nl</span>, samples<span class="op">=</span><span class="fl">500</span>, nseeds<span class="op">=</span><span class="fl">1</span>, precision<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-4-run-simulations-1">Step 4: Run simulations<a class="anchor" aria-label="anchor" href="#step-4-run-simulations-1"></a>
</h5>
<p>To execute the simulations, we can use the function
<code><a href="../reference/run_nl_all.html">run_nl_all()</a></code>. Sensitivity analyses typically have many runs
that need to be simulated, thus we recommend to parallelize model runs
by adjusting the future plan (more details on parallelization can be
found in the “Advanced configuration” vignette).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_nl_all.html">run_nl_all</a></span><span class="op">(</span><span class="va">nl</span>, split<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-5-investigate-output-1">Step 5: Investigate output<a class="anchor" aria-label="anchor" href="#step-5-investigate-output-1"></a>
</h5>
<p>First, we need to attach the results to the nl object.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/setsim.html">setsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"simoutput"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">nl</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span><span class="op">@</span><span class="va">outpath</span>, <span class="st">"lhs.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>After results have been attached, we need to post-process our data to
run the <code>pcc</code> and <code>src</code> function of the
sensitivity package. We first take our parameter matrix
(<code>siminput</code>) and select only columns with variable parameters
and drop all other columns. We also need to rename the columns because
<code>pcc</code> and <code>src</code> do not support special characters
(-) in column names.</p>
<p>Our simulation results are measured for each tick, thus we first need
to aggregate our output. Here we just calculate the mean and standard
deviation of outputs for each random-seed and siminputrow combination.
Afterwards, we drop the random seed and siminputrow columns and rename
the columns to remove special characters.</p>
<p>Finally, we use both datasets to run the <code>pcc</code> and
<code>src</code> functions. These functions can only compute
coefficients for one output at a time. Thus, we nested the function call
inside a <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> function that iterates over the
column names of our output tibble.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getsim.html">getsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"siminput"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>    <span class="co"># Take input parameter matrix</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/getexp.html">getexp</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"variables"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># Select variable parameters only</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">rename_all</a></span><span class="op">(</span><span class="op">~</span><span class="fu">str_replace_all</span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-"</span> <span class="op">=</span> <span class="st">"_"</span>, <span class="st">"\\s+"</span> <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Remove - and space characters.</span></span>
<span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getsim.html">getsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"simoutput"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>   <span class="co"># Take simulation output</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">`random-seed`</span>, <span class="va">siminputrow</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Group by random seed and siminputrow</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html" class="external-link">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="../reference/getexp.html">getexp</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"metrics"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean<span class="op">=</span><span class="va">mean</span>, sd<span class="op">=</span><span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Aggregate output</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># Ungroup</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">`random-seed`</span>, <span class="op">-</span><span class="va">siminputrow</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># Only select metrics</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">rename_all</a></span><span class="op">(</span><span class="op">~</span><span class="fu">str_replace_all</span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-"</span> <span class="op">=</span> <span class="st">"_"</span>, <span class="st">"\\s+"</span> <span class="op">=</span> <span class="st">"_"</span>, <span class="st">"\\["</span> <span class="op">=</span> <span class="st">"_"</span>, <span class="st">"\\]"</span> <span class="op">=</span> <span class="st">"_"</span>, <span class="st">"="</span> <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Remove - and space characters.</span></span>
<span></span>
<span><span class="co"># Perform pcc and src for each output separately (map)</span></span>
<span><span class="va">pcc.result</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">sensitivity</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sensitivity/man/pcc.html" class="external-link">pcc</a></span><span class="op">(</span>X<span class="op">=</span><span class="va">input</span>, y<span class="op">=</span><span class="va">output</span><span class="op">[</span>,<span class="va">x</span><span class="op">]</span>, nboot <span class="op">=</span> <span class="fl">100</span>, rank <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">src.result</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">sensitivity</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sensitivity/man/src.html" class="external-link">src</a></span><span class="op">(</span>X<span class="op">=</span><span class="va">input</span>, y<span class="op">=</span><span class="va">output</span><span class="op">[</span>,<span class="va">x</span><span class="op">]</span>, nboot <span class="op">=</span> <span class="fl">100</span>, rank <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>The results are reported as a nested list, where each outer element
represents one of the calculated model outputs. The inner list items
represent the different outputs from the <code>pcc</code> and
<code>src</code> functions.</p>
<p>We can for example look at the <code>pcc</code> results of one
specific output by using the basic <code>plot</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pcc.result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>We can also extract all the data to a tidy data format and create
nice plots with the ggplot package:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pcc.result.tidy</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">pcc.result</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">pcc.result</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">PCC</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span>var<span class="op">=</span><span class="st">"parameter"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pcc.result.tidy</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">metric</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">parameter</span>, y<span class="op">=</span><span class="va">original</span>, color<span class="op">=</span><span class="va">metric</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">parameter</span>, ymin<span class="op">=</span><span class="va">`min. c.i.`</span>, ymax<span class="op">=</span><span class="va">`max. c.i.`</span>, color<span class="op">=</span><span class="va">metric</span><span class="op">)</span>, width<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">src.result.tidy</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">src.result</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">src.result</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">SRC</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span>var<span class="op">=</span><span class="st">"parameter"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">src.result.tidy</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">metric</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">parameter</span>, y<span class="op">=</span><span class="va">original</span>, color<span class="op">=</span><span class="va">metric</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">parameter</span>, ymin<span class="op">=</span><span class="va">`min. c.i.`</span>, ymax<span class="op">=</span><span class="va">`max. c.i.`</span>, color<span class="op">=</span><span class="va">metric</span><span class="op">)</span>, width<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
