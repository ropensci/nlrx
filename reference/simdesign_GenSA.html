<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add a Simulated Annealing simdesign to a nl object — simdesign_GenSA • nlrx | NetLogo from R</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add a Simulated Annealing simdesign to a nl object — simdesign_GenSA"><meta property="og:description" content="Add a Simulated Annealing simdesign to a nl object"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nlrx | NetLogo from R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/getstarted.html">
    <span class="fa fa-magic"></span>
     
    Get Started
  </a>
</li>
<li>
  <a href="../articles/furthernotes.html">
    <span class="fa fa-book"></span>
     
    Advanced configuration
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/articles/spatial-output.html">
        <span class="fa fa-location-arrow"></span>
         
        Capturing spatial NetLogo output
      </a>
    </li>
    <li>
      <a href="../articles/articles/manual-output.html">
        <span class="fa fa-location-arrow"></span>
         
        Capturing NetLogo output manually
      </a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">
        <span class="fa fa-gear"></span>
         
        Sensitivity Analysis with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/optimization.html">
        <span class="fa fa-gear"></span>
         
        Optimization with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/abc.html">
        <span class="fa fa-gear"></span>
         
        Approximate Bayesian Computation (ABC) with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/simdesign-examples.html">
        <span class="fa fa-gear"></span>
         
        Simdesign examples
      </a>
    </li>
    <li>
      <a href="../articles/articles/interfacing-different-models.html">
        <span class="fa fa-image"></span>
         
        Interfacing a variety of different NetLogo models
      </a>
    </li>
    <li>
      <a href="../articles/articles/nlrx_nldoc.html">
        <span class="fa fa-book"></span>
         
        NetLogo documentation with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/articles/nlrx_papers.html">
        <span class="fa fa-bookmark"></span>
         
        Publication record
      </a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://github.com/ropensci/nlrx" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add a Simulated Annealing simdesign to a nl object</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/nlrx/blob/HEAD/R/simdesign_helper.R" class="external-link"><code>R/simdesign_helper.R</code></a></small>
    <div class="hidden name"><code>simdesign_GenSA.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add a Simulated Annealing simdesign to a nl object</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simdesign_GenSA</span><span class="op">(</span><span class="va">nl</span>, par <span class="op">=</span> <span class="cn">NULL</span>, evalcrit <span class="op">=</span> <span class="fl">1</span>, control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, nseeds <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>nl</dt>
<dd><p>nl object with a defined experiment</p></dd>


<dt>par</dt>
<dd><p>optional vector of start values for each parameter defined in variables of experiment</p></dd>


<dt>evalcrit</dt>
<dd><p>position of evaluation criterion within defined NetLogo metrics of nl experiment or a function that reports a single numeric value</p></dd>


<dt>control</dt>
<dd><p>list with further arguments passed to the GenSA function (see ?GenSA for details)</p></dd>


<dt>nseeds</dt>
<dd><p>number of seeds for this simulation design</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>simdesign S4 class object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function creates a simdesign S4 class which can be added to a nl object.</p>
<p>Variables in the experiment variable list need to provide a numeric distribution with min and max (e.g. list(min=1, max=4)).</p>
<p>The GenSA simdesign generates a simulated Annealing experiment within the defined min and max parameter boundaries
that are defined in the variables field of the experiment object within the nl object.</p>
<p>The evalcrit reporter defines the evaluation criterion for the simulated annealing procedure.
There are two options to evaluate the fitness value of each iteration of the algorithm:</p><ol><li><p>Use a reporter that is defined within the experiment metrics vector.
You can just enter the position of that metric within the experiment metrics vector (e.g. 1 would use the first defined metric of the experiment to evaluate each iteration).
The algorithm automatically calculates the mean value of this reporter if evalticks is defined to measure multiple ticks during each simulation.
You can define a function that post-processes NetLogo output to calculate an evaluation value. This function must accept the nl object as input and return one single numeric value.
The nl object that is then provided to the evaluation function will have results of the current iteration attached. The results can be accessed via the simoutput slot of the simdesign.
You can pass this function to evalcrit. It is then applied to the output of each iteration.</p></li>
</ol><p>The function uses the GenSA package to set up a Simulated Annealing function.
For details on the GenSA function parameters see ?GenSA
Finally, the function reports a simdesign object.</p>
<p>Simulated Annealing simdesigns can only be executed using the <a href="run_nl_dyn.html">run_nl_dyn</a> function instead of <a href="run_nl_all.html">run_nl_all</a> or <a href="run_nl_one.html">run_nl_one</a>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To attach a simdesign, a nl object needs to be created first (see ?nl).</span></span></span>
<span class="r-in"><span><span class="co"># For this example, we load a nl object from test data.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="va">nl_lhs</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Using a metric from the experiment metrics vector for evaluation:</span></span></span>
<span class="r-in"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu">simdesign_GenSA</span><span class="op">(</span>nl<span class="op">=</span><span class="va">nl</span>,</span></span>
<span class="r-in"><span>                                 par<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                                 evalcrit<span class="op">=</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                 control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>max.time <span class="op">=</span> <span class="fl">600</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 nseeds<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Creating GenSA simulation design</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Using a self-defined evaluation function</span></span></span>
<span class="r-in"><span><span class="co"># For demonstration we define a simple function that calculates</span></span></span>
<span class="r-in"><span><span class="co"># the maximum value of count sheep output.</span></span></span>
<span class="r-in"><span><span class="va">critfun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">nl</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span><span class="op">@</span><span class="va">simoutput</span></span></span>
<span class="r-in"><span><span class="va">crit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">`count sheep`</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">crit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu">simdesign_GenSA</span><span class="op">(</span>nl<span class="op">=</span><span class="va">nl</span>,</span></span>
<span class="r-in"><span>                                 par<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                                 evalcrit<span class="op">=</span><span class="va">critfun</span>,</span></span>
<span class="r-in"><span>                                 control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>max.time <span class="op">=</span> <span class="fl">600</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 nseeds<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Creating GenSA simulation design</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jan Salecker, Marco Sciaini, Sebastian Hanss.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

