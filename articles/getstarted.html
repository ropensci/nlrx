<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Started • nlrx | NetLogo from R</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nlrx | NetLogo from R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/getstarted.html">
    <span class="fa fa-magic"></span>

    Get Started
  </a>
</li>
<li>
  <a href="../articles/furthernotes.html">
    <span class="fa fa-book"></span>

    Advanced configuration
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    More

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/articles/spatial-output.html">
        <span class="fa fa-location-arrow"></span>

        Capturing spatial NetLogo output
      </a>
    </li>
    <li>
      <a href="../articles/articles/manual-output.html">
        <span class="fa fa-location-arrow"></span>

        Capturing NetLogo output manually
      </a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">
        <span class="fa fa-gear"></span>

        Sensitivity Analysis with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/optimization.html">
        <span class="fa fa-gear"></span>

        Optimization with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/abc.html">
        <span class="fa fa-gear"></span>

        Approximate Bayesian Computation (ABC) with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/simdesign-examples.html">
        <span class="fa fa-gear"></span>

        Simdesign examples
      </a>
    </li>
    <li>
      <a href="../articles/articles/interfacing-different-models.html">
        <span class="fa fa-image"></span>

        Interfacing a variety of different NetLogo models
      </a>
    </li>
    <li>
      <a href="../articles/articles/nlrx_nldoc.html">
        <span class="fa fa-book"></span>

        NetLogo documentation with nlrx
      </a>
    </li>
    <li>
      <a href="../articles/articles/nlrx_papers.html">
        <span class="fa fa-bookmark"></span>

        Publication record
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/abc.html">Approximate Bayesian Computation (ABC)</a>
    </li>
    <li>
      <a href="../articles/furthernotes.html">Advanced configuration</a>
    </li>
    <li>
      <a href="../articles/getstarted.html">Get Started</a>
    </li>
    <li>
      <a href="../articles/interfacing-different-models.html">Interfacing a variety of different NetLogo models</a>
    </li>
    <li>
      <a href="../articles/manual-output.html">Capturing NetLogo output manually</a>
    </li>
    <li>
      <a href="../articles/nlrx_nldoc.html">NetLogo documentation with nlrx</a>
    </li>
    <li>
      <a href="../articles/nlrx_papers.html">Publication record</a>
    </li>
    <li>
      <a href="../articles/optimization.html">Optimization</a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">Sensitivity Analysis</a>
    </li>
    <li>
      <a href="../articles/simdesign-examples.html">Simdesign examples</a>
    </li>
    <li>
      <a href="../articles/spatial-output.html">Spatial Output</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/ropensci/nlrx/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get Started</h1>
                        <h4 data-toc-skip class="author">Jan
Salecker</h4>
            
            <h4 data-toc-skip class="date">2024-09-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/nlrx/blob/master/vignettes/getstarted.Rmd" class="external-link"><code>vignettes/getstarted.Rmd</code></a></small>
      <div class="hidden name"><code>getstarted.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="nlrx">nlrx<a class="anchor" aria-label="anchor" href="#nlrx"></a>
</h2>
<p>The nlrx package provides tools to setup and execute NetLogo
simulations from R. NetLogo is a free, open-source and cross-platform
modelling environment for simulating natural and social phenomena.
NetLogo focusses on implementation of agent-based and spatially explicit
simulation models, although system dynamics models are supported as
well. NetLogo is developed and maintained at the Center for Connected
Learning and Computer-Based Modeling, Northwestern University, Evanston,
IL. More details on NetLogo itself are available online: <a href="https://ccl.northwestern.edu/netlogo/docs/" class="external-link">NetLogo online
documentation</a></p>
<p>NetLogo comes with the built-in experiment tool <a href="https://ccl.northwestern.edu/netlogo/docs/behaviorspace.html" class="external-link">Behavior
Space</a> that allows to setup and execute model simulations with
different settings and parameter variations and to collect model output.
This experiment tool can be executed via command line in combination
with an XML file that contains the experiment specifications, such as
runtime, variables, output measurements, stop conditions, and more. One
limitation of Behavior Space is, that it only supports full-factorial
parameter designs, which may not be appropriate for complex model
analyses. Furthermore, Behavior Space experiment specifications are
stored within the NetLogo file and are not easily accessible from R.
However, in many cases it is useful to store such specifications along
with the model output and analyses results in order to enable fully
reproducible model analyses.</p>
<p>The nlrx package utilizes the commandline functionality of Behavior
Space to execute NetLogo simulations directly from R. Instead of
defining experiments within NetLogo Behavior Space, experiments are
defined in R using the class objects of the nlrx package. These class
objects hold all the information that is needed to run these experiments
remotely from R, such as path to NetLogo installation folder, path to
the model file and the experiment specifications itself. nlrx provides
useful helper functions to generate parameter input matrices from
parameter range definitions that cover a wide range of parameter
exploration approaches. By storing all relevant information on
simulation experiments, including the output of the model simulations in
one class object, experiments can be easily stored and shared.</p>
<p>In summary, the nlrx package uses a similar structure as NetLogos
Behavior Space but offers more flexibility and additional tools for
running reproducible complex model analyses directly from R.</p>
<div class="section level3">
<h3 id="publication">Publication<a class="anchor" aria-label="anchor" href="#publication"></a>
</h3>
<p>Further information on the package functionality and detailed code
examples can be found in our accompanying publication: Salecker J,
Sciaini M, Meyer KM, Wiegand K. The nlrx r package: A next-generation
framework for reproducible NetLogo model analyses. Methods Ecol Evol.
2019;2041-210X. <a href="https://doi.org/10.1111/2041-210X.13286" class="external-link">https://doi.org/10.1111/2041-210X.13286</a>.</p>
<p>Get citation information for <code>nlrx</code> in R doing
<code>citation(package = 'nlrx')</code>.</p>
</div>
<div class="section level3">
<h3 id="prerequirements">Prerequirements<a class="anchor" aria-label="anchor" href="#prerequirements"></a>
</h3>
<div class="section level4">
<h4 id="netlogo">NetLogo<a class="anchor" aria-label="anchor" href="#netlogo"></a>
</h4>
<p>In order to use the nlrx package, <a href="http://netlogoweb.org/" class="external-link">NetLogo</a> (&gt;=5.3.1) needs to be
installed on the system that is used to execute model simulations
(local/remote). For remote execution, NetLogo needs to be installed on
remote machines as well. The nlrx package provides a utility function
(<code><a href="../reference/download_netlogo.html">download_netlogo()</a></code>) that can be used to download and unzip
(only unix systems) a specified NetLogo version to a local folder. For
windows machines, the downloaded file needs to be executed in order to
install NetLogo on the local system. If you are running MacOS, please
use the Linux tar.gz version of NetLogo (either from the NetLogo
Homepage or by using the <code><a href="../reference/download_netlogo.html">download_netlogo()</a></code> function). The
dmg version from the NetLogo homepage is not compatible with nlrx.</p>
<p>All code snippets on this homepage should be compatible with Netlogo
&lt;= 6.2.2. In version 6.3.0, the folder structure of NetLogo was
slighlty updated, thus the modelpath in the code snippets need to be
adjusted accordingly (the <code>"app/"</code> folder needs to be removed
from the modelpath).</p>
</div>
<div class="section level4">
<h4 id="java">Java<a class="anchor" aria-label="anchor" href="#java"></a>
</h4>
<p>Because NetLogo is executed in a Java virtual machine, Java needs to
be installed on the local/remote system as well. We recommend the <a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" class="external-link">Oracle
Java SE Development Kit 8</a> or the <a href="https://github.com/ojdkbuild/ojdkbuild" class="external-link">openjdk</a>. While the
nlrx package might work without setting the Java system path explicitly,
we recommend to make sure that JAVA_HOME points to the correct Java
installation of the system.</p>
</div>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the released version of nlrx from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"nlrx"</span><span class="op">)</span></span></code></pre></div>
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropensci/nlrx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-started">Get started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h3>
<p>General information that is needed to run NetLogo simulations
remotely, such as path to the NetLogo installation folder is stored
within a <code>nl</code> class object. Nested within this
<code>nl</code> class are the classes <code>experiment</code> and
<code>simdesign</code>. The <code>experiment</code> class stores all
experiment specifications. After attaching a valid experiment, a
<code>simdesign</code> class object can be attached to the
<code>nl</code> class object, by using one of the simdesign helper
functions. These helper functions create different parameter input
matrices from the experiment variable definitions that can then be
executed by the <code><a href="../reference/run_nl_one.html">run_nl_one()</a></code> and <code><a href="../reference/run_nl_all.html">run_nl_all()</a></code>
functions. The nested design allows to store everything related to the
experiment within one R object. Additionally, different simdesign helper
functions can be applied to the same <code>nl</code> object in order to
repeat the same experiment with different parameter exploration methods
(simdesigns).</p>
<div class="section level4">
<h4 id="step-by-step-application-example">Step by step application example<a class="anchor" aria-label="anchor" href="#step-by-step-application-example"></a>
</h4>
<p>The “Wolf Sheep Predation” model from the NetLogo models library is
used to present a basic example on how to setup and run NetLogo model
simulations from R.</p>
<div class="section level5">
<h5 id="step-1-create-a-nl-object">Step 1: Create a nl object:<a class="anchor" aria-label="anchor" href="#step-1-create-a-nl-object"></a>
</h5>
<p>The nl object holds all information on the NetLogo version, a path to
the NetLogo directory with the defined version, a path to the model
file, and the desired memory for the java virtual machine. Depending on
the operation system, paths to NetLogo and the model need to be
adjusted.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/nlrx/">nlrx</a></span><span class="op">)</span></span>
<span><span class="co"># Windows default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/Program Files/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/out"</span><span class="op">)</span></span>
<span><span class="co"># Unix default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/out"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nl.html">nl</a></span><span class="op">(</span>nlversion <span class="op">=</span> <span class="st">"6.0.3"</span>,</span>
<span>         nlpath <span class="op">=</span> <span class="va">netlogopath</span>,</span>
<span>         modelpath <span class="op">=</span> <span class="va">modelpath</span>,</span>
<span>         jvmmem <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-2-attach-an-experiment">Step 2: Attach an experiment<a class="anchor" aria-label="anchor" href="#step-2-attach-an-experiment"></a>
</h5>
<p>The experiment object is organized in a similar fashion as NetLogo
Behavior Space experiments. It contains all information that is needed
to generate a simulation parameter matrix and to execute the NetLogo
simulations. Details on the specific slots of the experiment class can
be found in the package documentation (<code><a href="../reference/experiment.html">?experiment</a></code>) and the
“Advanced configuration” vignette.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/experiment.html">experiment</a></span><span class="op">(</span>expname<span class="op">=</span><span class="st">"wolf-sheep"</span>,</span>
<span>                            outpath<span class="op">=</span><span class="va">outpath</span>,</span>
<span>                            repetition<span class="op">=</span><span class="fl">1</span>,</span>
<span>                            tickmetrics<span class="op">=</span><span class="st">"true"</span>,</span>
<span>                            idsetup<span class="op">=</span><span class="st">"setup"</span>,</span>
<span>                            idgo<span class="op">=</span><span class="st">"go"</span>,</span>
<span>                            runtime<span class="op">=</span><span class="fl">50</span>,</span>
<span>                            evalticks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>                            metrics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count sheep"</span>, <span class="st">"count wolves"</span>, <span class="st">"count patches with [pcolor = green]"</span><span class="op">)</span>,</span>
<span>                            variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'initial-number-sheep'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">'initial-number-wolves'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"model-version"</span> <span class="op">=</span> <span class="st">"\"sheep-wolves-grass\""</span>,</span>
<span>                                             <span class="st">"grass-regrowth-time"</span> <span class="op">=</span> <span class="fl">30</span>,</span>
<span>                                             <span class="st">"sheep-gain-from-food"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                             <span class="st">"wolf-gain-from-food"</span> <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                                             <span class="st">"sheep-reproduce"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                             <span class="st">"wolf-reproduce"</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                             <span class="st">"show-energy?"</span> <span class="op">=</span> <span class="st">"false"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-3-attach-a-simulation-design">Step 3: Attach a simulation design<a class="anchor" aria-label="anchor" href="#step-3-attach-a-simulation-design"></a>
</h5>
<p>While the experiment defines the variables and specifications of the
model, the simulation design creates a parameter input table based on
these model specifications and the chosen simulation design method. nlrx
provides a bunch of different simulation designs, such as
full-factorial, latin-hypercube, sobol, morris and eFast (see “Simdesign
Examples” vignette for more information on simdesigns). All simdesign
helper functions need a properly defined nl object with a valid
experiment design. Each simdesign helper also allows to define a number
of random seeds that are randomly generated and can be used to execute
repeated simulations of the same parameter matrix with different
random-seeds (see “Advanced configuration” vignette for more information
on random-seed and repetition management). A simulation design is
attached to a nl object by using one of the simdesign helper
functions:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simdesign_lhs.html">simdesign_lhs</a></span><span class="op">(</span>nl<span class="op">=</span><span class="va">nl</span>,</span>
<span>                               samples<span class="op">=</span><span class="fl">100</span>,</span>
<span>                               nseeds<span class="op">=</span><span class="fl">3</span>,</span>
<span>                               precision<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-4-run-simulations">Step 4: Run simulations<a class="anchor" aria-label="anchor" href="#step-4-run-simulations"></a>
</h5>
<p>All information that is needed to run the simulations is now stored
within the nl object. The <code><a href="../reference/run_nl_one.html">run_nl_one()</a></code> function allows to
run one specific simulation from the siminput parameter table. The
<code><a href="../reference/run_nl_all.html">run_nl_all()</a></code> function runs a loop over all simseeds and
rows of the parameter input table siminput. The loops are constructed in
a way that allows easy parallelisation, either locally or on remote HPC
machines (see “Advanced configuration” vignette for more information on
parallelisation). Before running your simulations you might want to
check your current nl object setup.
<code>eval_variables_constants(nl)</code> evaluates if the defined
variables and constants are correctly defined and are consistent with
the attached model. <code>print(nl)</code> prints a complete summary of
the provided nl object including checkmarks that might help to indicate
potential problems.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Evaluate nl object:</span></span>
<span><span class="fu"><a href="../reference/eval_variables_constants.html">eval_variables_constants</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run all simulations (loop over all siminputrows and simseeds)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_nl_all.html">run_nl_all</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="step-5-attach-results-to-nl-and-run-analysis">Step 5: Attach results to nl and run analysis<a class="anchor" aria-label="anchor" href="#step-5-attach-results-to-nl-and-run-analysis"></a>
</h5>
<p>nlrx provides method specific analysis functions for each simulation
design. Depending on the chosen design, the function reports a tibble
with aggregated results or sensitivity indices. In order to run the
analyze_nl function, the simulation output has to be attached to the nl
object first. The simdesign class within the nl object provides a slot
for attaching output results (simoutput). An output results tibble can
be attached to this slot by using the simdesign setter function
<code>setsim(nl, "simoutput")</code>. After attaching the simulation
results, these can also be written to the defined outpath of the
experiment object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Attach results to nl object:</span></span>
<span><span class="fu"><a href="../reference/setsim.html">setsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"simoutput"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">results</span></span>
<span></span>
<span><span class="co"># Write output to outpath of experiment within nl</span></span>
<span><span class="fu"><a href="../reference/write_simoutput.html">write_simoutput</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Do further analysis:</span></span>
<span><span class="fu"><a href="../reference/analyze_nl.html">analyze_nl</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="complete-code-example">Complete code example<a class="anchor" aria-label="anchor" href="#complete-code-example"></a>
</h3>
<p>This code block contains the above code example for easy copy-pasting
into your R script:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/nlrx/">nlrx</a></span><span class="op">)</span></span>
<span><span class="co"># Windows default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/Program Files/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"C:/out"</span><span class="op">)</span></span>
<span><span class="co"># Unix default NetLogo installation path (adjust to your needs!):</span></span>
<span><span class="va">netlogopath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/NetLogo 6.0.3"</span><span class="op">)</span></span>
<span><span class="va">modelpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">netlogopath</span>, <span class="st">"app/models/Sample Models/Biology/Wolf Sheep Predation.nlogo"</span><span class="op">)</span></span>
<span><span class="va">outpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/home/out"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setup nl object</span></span>
<span><span class="va">nl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nl.html">nl</a></span><span class="op">(</span>nlversion <span class="op">=</span> <span class="st">"6.0.3"</span>,</span>
<span>         nlpath <span class="op">=</span> <span class="va">netlogopath</span>,</span>
<span>         modelpath <span class="op">=</span> <span class="va">modelpath</span>,</span>
<span>         jvmmem <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Attach experiment</span></span>
<span><span class="va">nl</span><span class="op">@</span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/experiment.html">experiment</a></span><span class="op">(</span>expname<span class="op">=</span><span class="st">"wolf-sheep"</span>,</span>
<span>                            outpath<span class="op">=</span><span class="va">outpath</span>,</span>
<span>                            repetition<span class="op">=</span><span class="fl">1</span>,</span>
<span>                            tickmetrics<span class="op">=</span><span class="st">"true"</span>,</span>
<span>                            idsetup<span class="op">=</span><span class="st">"setup"</span>,</span>
<span>                            idgo<span class="op">=</span><span class="st">"go"</span>,</span>
<span>                            runtime<span class="op">=</span><span class="fl">50</span>,</span>
<span>                            evalticks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>                            metrics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count sheep"</span>, <span class="st">"count wolves"</span>, <span class="st">"count patches with [pcolor = green]"</span><span class="op">)</span>,</span>
<span>                            variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'initial-number-sheep'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span>,</span>
<span>                                             <span class="st">'initial-number-wolves'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min<span class="op">=</span><span class="fl">50</span>, max<span class="op">=</span><span class="fl">150</span>, qfun<span class="op">=</span><span class="st">"qunif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"model-version"</span> <span class="op">=</span> <span class="st">"\"sheep-wolves-grass\""</span>,</span>
<span>                                             <span class="st">"grass-regrowth-time"</span> <span class="op">=</span> <span class="fl">30</span>,</span>
<span>                                             <span class="st">"sheep-gain-from-food"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                             <span class="st">"wolf-gain-from-food"</span> <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                                             <span class="st">"sheep-reproduce"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                             <span class="st">"wolf-reproduce"</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                             <span class="st">"show-energy?"</span> <span class="op">=</span> <span class="st">"false"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Attach simdesign</span></span>
<span><span class="va">nl</span><span class="op">@</span><span class="va">simdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simdesign_lhs.html">simdesign_lhs</a></span><span class="op">(</span>nl<span class="op">=</span><span class="va">nl</span>,</span>
<span>                               samples<span class="op">=</span><span class="fl">100</span>,</span>
<span>                               nseeds<span class="op">=</span><span class="fl">3</span>,</span>
<span>                               precision<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Evaluate nl object:</span></span>
<span><span class="fu"><a href="../reference/eval_variables_constants.html">eval_variables_constants</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run all simulations (loop over all siminputrows and simseeds)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_nl_all.html">run_nl_all</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Attach results to nl object:</span></span>
<span><span class="fu"><a href="../reference/setsim.html">setsim</a></span><span class="op">(</span><span class="va">nl</span>, <span class="st">"simoutput"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">results</span></span>
<span></span>
<span><span class="co"># Write output to outpath of experiment within nl</span></span>
<span><span class="fu"><a href="../reference/write_simoutput.html">write_simoutput</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Do further analysis:</span></span>
<span><span class="fu"><a href="../reference/analyze_nl.html">analyze_nl</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jan Salecker, Marco Sciaini, Sebastian Hanss.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
